import{j as p,s as z}from"./transform.D34fbgXt.js";import{u as F,p as L,c as X}from"./index.es.m1rM0mzC.js";import{r as m}from"./index.BVOCwoKb.js";import{s as e}from"./styles_module.99b25ffd.BjvazIKZ.js";import{l as A}from"./linear.BjYA7XjI.js";import{m as y}from"./map.xHaDjrCc.js";import{f as Y}from"./forEach.x-cTlwp5.js";import{a as D,b as G}from"./axis.D3QohQNI.js";import{l as H}from"./line.CjWAwAWE.js";const t={container:{class:"flex flex-col "},display:{width:600,height:200,class:" p-0 mb-0 w-full h-auto"},controls:{width:600,height:100,class:"d3-widgets p-0  mb-0 w-full h-auto",grid:{x:12,y:6}},plot:{margin:{l:60,r:20,t:20,b:50},yr:[0,1],xaxis:{label:"n",label_position:{x:0,y:35}},yaxis:{label:"xₙ",label_position:{x:-50,y:0}},dotsize:2,N_sequences:80},widgets:{slider_size:500,slider_girth:8,slider_knob:9,slider_fontsize:14,sliders:[{id:"lambda",label:"λ",range:[0,4],value:1.2,position:{x:1,y:2},show:!0},{id:"x0",label:"x₀",range:[0,1],value:.023,position:{x:1,y:5},show:!0}]}},I=(i,h)=>{const a=z(i),n=z(h),R=F(t.controls.width,t.controls.height,t.controls.grid.x,t.controls.grid.y),x=t.plot.N_sequences,j=[0,x],N=t.plot.yr,l=A().domain(j).range([t.plot.margin.l,t.display.width-t.plot.margin.r]),o=A().domain(N).range([t.display.height-t.plot.margin.b,t.plot.margin.t]),$=D(l),B=G(o),b=H().x(s=>l(s.x)).y(s=>o(s.y)),u=y(t.widgets.sliders,s=>X().id(s.id).label(s.label).range(s.range).value(s.value).fontsize(t.widgets.slider_fontsize).size(t.widgets.slider_size).girth(t.widgets.slider_girth).knob(t.widgets.slider_knob).show(s.show).position(R.position(s.position.x,s.position.y)));n.selectAll(null).data(u).enter().append(L);const E=()=>{a.selectAll("*").remove(),n.selectAll("*").remove()},k=(s,r)=>r*s*(1-s),w=(s,r,q)=>{let d=0,g=[s];for(d=0;d<q;d++)g[d+1]=k(g[d],r);return g},_=u[1],v=u[0];var f=w(_.value(),v.value(),x),c=y(f,(s,r)=>({x:r,y:s}));const C=()=>{f=w(_.value(),v.value(),x),c=y(f,(s,r)=>({x:r,y:s})),a.selectAll("."+e.curve).datum(c).attr("d",b),a.selectAll("."+e.dots).data(c).attr("transform",function(s){return"translate("+l(s.x)+","+o(s.y)+")"})};return Y(u,s=>s.update(C)),a.append("g").call($).attr("class",e.xaxis).attr("transform","translate(0,"+o(0)+")"),a.append("g").call(B).attr("class",e.yaxis).attr("transform","translate("+l(0)+",0)"),a.append("text").text(t.plot.xaxis.label).attr("class",e.axis_label).attr("transform","translate("+(l(x/2)+t.plot.xaxis.label_position.x)+","+(o(0)+t.plot.xaxis.label_position.y)+")"),a.append("text").text(t.plot.yaxis.label).attr("class",e.axis_label).attr("transform","translate("+(l(0)+t.plot.yaxis.label_position.x)+","+(o(.5)+t.plot.yaxis.label_position.y)+")"),a.append("path").datum(c).attr("d",b).attr("class",e.curve),a.selectAll(".dots").data(c).enter().append("circle").attr("r",t.plot.dotsize).attr("class",e.dots).attr("transform",function(s){return"translate("+l(s.x)+","+o(s.y)+")"}),E},V=({id:i})=>{const h=m.useRef(null),a=m.useRef(null),n=m.useRef(null);return m.useEffect(()=>I(a.current,n.current),[i]),p.jsx(p.Fragment,{children:p.jsxs("div",{ref:h,id:i,className:t.container.class,children:[p.jsx("svg",{ref:a,id:`${i}-display`,className:t.display.class,width:t.display.width,height:t.display.height,viewBox:`0 0 ${t.display.width} ${t.display.height}`}),p.jsx("svg",{ref:n,id:`${i}-controls`,className:t.controls.class,width:t.controls.width,height:t.controls.height,viewBox:`0 0 ${t.controls.width} ${t.controls.height}`})]})})};export{V as default};
