import{j as i,s as A,t as X}from"./transform.D34fbgXt.js";import{u as Y,p as _,f as D}from"./index.es.m1rM0mzC.js";import{r as g}from"./index.BVOCwoKb.js";import{s as o}from"./styles_module.dc4ac588.BTNyYrcH.js";import{l as y}from"./linear.BjYA7XjI.js";import{b as G,m as N}from"./map.xHaDjrCc.js";import{r as B}from"./range.CY5glnGm.js";import{f as H}from"./forEach.x-cTlwp5.js";import{a as E,b as C}from"./axis.D3QohQNI.js";import{l as M}from"./line.CjWAwAWE.js";import{n as J}from"./normal.ulaXCRiq.js";function K(a,n){for(var e,c=-1,p=a.length;++c<p;){var r=n(a[c]);r!==void 0&&(e=e===void 0?r:e+r)}return e}var O=NaN;function P(a,n){var e=a==null?0:a.length;return e?K(a,n)/e:O}function z(a,n){return P(a,G(n))}const s={container:{class:"explorable flex flex-col items-center"},display:{width:600,height:600,class:"gront w-[50%] mb-0 h-auto",margin:{l:20,r:50,t:20,b:50},fontsize:"20px",xr:[-100,100],yr:[-100,100]},plot:{width:600,height:600,class:"mb-0 w-[50%] h-auto",margin:{l:50,r:30,t:20,b:50},fontsize:"20px",xr:[0,1e3],yr:[0,40]},controls:{width:200,height:100,class:"d3-widgets p-0 mb-0 h-auto",grid:{x:6,y:6}},widgets:{buttons:[{id:"play_pause",actions:["play","pause"],value:0,position:{x:1,y:3}},{id:"reset",actions:["rewind"],value:0,position:{x:5,y:3}}]}},Q=(a,n,e)=>{var p={};const r=y().domain(s.display.xr).range([s.display.margin.l,s.display.width-s.display.margin.r]),d=y().domain(s.display.yr).range([s.display.height-s.display.margin.b,s.display.margin.t]),w=y().domain(s.plot.xr).range([s.plot.margin.l,s.plot.width-s.plot.margin.r]),v=y().domain(s.plot.yr).range([s.plot.height-s.plot.margin.b,s.plot.margin.t]),q=E(r),k=C(d),F=E(w),I=C(v);M().x(t=>r(t.x)).y(t=>d(t.y));const b=M().x(t=>w(t.t)).y(t=>v(t.r)),R=J(0,1);var m=0,l=N(B(1e3),t=>({id:t,x:0,y:0})),u=[{t:m,r:z(l,t=>Math.sqrt(t.x*t.x+t.y*t.y))}];const L=Y(s.controls.width,s.controls.height,s.controls.grid.x,s.controls.grid.y),f=A(a.current),$=A(e.current),h=A(n.current),x=N(s.widgets.buttons,t=>D().id(t.id).value(t.value).actions(t.actions).position(L.position(t.position.x,t.position.y)));function S(){m++,H(l,t=>{t.x+=R(),t.y+=R()}),u.push({t:m,r:z(l,t=>Math.sqrt(t.x*t.x+t.y*t.y))}),f.selectAll("."+o.agent).data(l).attr("transform",function(t){return"translate("+r(t.x)+","+d(t.y)+")"}),h.select("#msd").datum(u).attr("d",b),m>1e3&&j()}function j(){m=0,l=N(B(1e3),t=>({id:t,x:0,y:0})),u=[{t:m,r:z(l,t=>Math.sqrt(t.x*t.x+t.y*t.y))}],f.selectAll("."+o.agent).data(l).attr("transform",function(t){return"translate("+r(t.x)+","+d(t.y)+")"}),h.select("#msd").datum(u).attr("d",b)}function T(t){x[0].value()==1?p=X(S,0):p.stop()}return x[0].update(T),x[1].update(j),$.selectAll(null).data(x).enter().append(_),f.append("g").attr("transform","translate(0,"+d(0)+")").call(q).style("font-size",s.display.fontsize).attr("class",o.axis),f.append("g").attr("transform","translate("+r(0)+",0)").call(k).style("font-size",s.display.fontsize).attr("class",o.axis),f.selectAll("."+o.agent).data(l).enter().append("circle").attr("class",o.agent).attr("r","3").style("stroke","none").attr("transform",function(t){return"translate("+r(t.x)+","+d(t.y)+")"}),h.append("path").datum(u).attr("d",b).attr("id","msd").attr("class",o.plotline),h.append("g").attr("transform","translate(0,"+v(0)+")").attr("class",o.axis).call(F).style("font-size",s.plot.fontsize),h.append("g").attr("transform","translate("+w(0)+",0)").attr("class",o.axis).call(I).style("font-size",s.plot.fontsize),()=>{$.selectAll("*").remove(),f.selectAll("*").remove(),h.selectAll("*").remove()}},lt=({id:a})=>{const n=g.useRef(null),e=g.useRef(null),c=g.useRef(null),p=g.useRef(null);return g.useEffect(()=>Q(n,e,c),[a]),i.jsx(i.Fragment,{children:i.jsxs("div",{ref:p,id:a,className:s.container.class,children:[i.jsxs("div",{className:"flex",children:[i.jsx("svg",{ref:n,id:`${a}-display`,className:s.display.class,width:s.display.width,height:s.display.height,viewBox:`0 0 ${s.display.width} ${s.display.height}`}),i.jsx("svg",{ref:e,id:`${a}-plot`,className:s.plot.class,width:s.plot.width,height:s.plot.height,viewBox:`0 0 ${s.plot.width} ${s.plot.height}`})]}),i.jsx("svg",{ref:c,id:`${a}-controls`,className:s.controls.class,width:s.controls.width,height:s.controls.height,viewBox:`0 0 ${s.controls.width} ${s.controls.height}`})]})})};export{lt as default};
