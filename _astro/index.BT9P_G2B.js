import{j as m,s as j}from"./transform.D34fbgXt.js";import{u as X,p as Y,l as D}from"./index.es.BhrnXTIK.js";import{r as w}from"./index.BVOCwoKb.js";import{s as e}from"./styles_module.1cbb2474.B-C9B7To.js";import{l as B}from"./linear.ChQqN_lz.js";import{m as h}from"./map.xHaDjrCc.js";import{f as G}from"./forEach.x-cTlwp5.js";import{a as H,b as I}from"./axis.D3QohQNI.js";import{l as J}from"./line.CjWAwAWE.js";const s={container:{class:"flex flex-col "},display:{width:600,height:200,class:" p-0 mb-0 w-full h-auto"},controls:{width:600,height:150,class:"d3-widgets p-0  mb-0 w-full h-auto",grid:{x:12,y:8}},plot:{margin:{l:60,r:20,t:20,b:50},yr:[0,1],xaxis:{label:"n",label_position:{x:0,y:35}},yaxis:{label:"xₙ",label_position:{x:-50,y:0}},dotsize:2,N_sequences:80},widgets:{slider_size:500,slider_girth:8,slider_knob:9,slider_fontsize:14,sliders:[{id:"lambda",label:"λ",range:[0,4],value:1.2,position:{x:1,y:2},show:!0},{id:"epsilon",label:"log₁₀ε",range:[-7,-3],value:-3,position:{x:1,y:4.5},show:!0},{id:"x0",label:"x₀",range:[0,1],value:.023,position:{x:1,y:7},show:!0}]}},K=(i,v)=>{const a=j(i),n=j(v),N=X(s.controls.width,s.controls.height,s.controls.grid.x,s.controls.grid.y),c=s.plot.N_sequences,$=[0,c],E=s.plot.yr,r=B().domain($).range([s.plot.margin.l,s.display.width-s.plot.margin.r]),o=B().domain(E).range([s.display.height-s.plot.margin.b,s.plot.margin.t]),k=H(r),C=I(o),f=J().x(t=>r(t.x)).y(t=>o(t.y)),d=h(s.widgets.sliders,t=>D().id(t.id).label(t.label).range(t.range).value(t.value).fontsize(s.widgets.slider_fontsize).size(s.widgets.slider_size).girth(s.widgets.slider_girth).knob(s.widgets.slider_knob).show(t.show).position(N.position(t.position.x,t.position.y)));n.selectAll(null).data(d).enter().append(Y);const q=()=>{a.selectAll("*").remove(),n.selectAll("*").remove()},M=(t,l)=>l*t*(1-t),g=(t,l,L)=>{let x=0,z=[t];for(x=0;x<L;x++)z[x+1]=M(z[x],l);return z},y=d[2],b=d[0],R=d[1];n.select("#slider_epsilon");var _=g(y.value(),b.value(),c),A=g(y.value()+Math.pow(10,R.value()),b.value(),c),p=h(_,(t,l)=>({x:l,y:t})),u=h(A,(t,l)=>({x:l,y:t}));const F=()=>{_=g(y.value(),b.value(),c),p=h(_,(t,l)=>({x:l,y:t})),A=g(y.value()+Math.pow(10,R.value()),b.value(),c),u=h(A,(t,l)=>({x:l,y:t})),a.selectAll("."+e.curve1).datum(p).attr("d",f),a.selectAll("."+e.dots1).data(p).attr("transform",function(t){return"translate("+r(t.x)+","+o(t.y)+")"}),a.selectAll("."+e.curve2).datum(u).attr("d",f),a.selectAll("."+e.dots2).data(u).attr("transform",function(t){return"translate("+r(t.x)+","+o(t.y)+")"})};return G(d,t=>t.update(F)),a.append("g").call(k).attr("class",e.xaxis).attr("transform","translate(0,"+o(0)+")"),a.append("g").call(C).attr("class",e.yaxis).attr("transform","translate("+r(0)+",0)"),a.append("text").text(s.plot.xaxis.label).attr("class",e.axis_label).attr("transform","translate("+(r(c/2)+s.plot.xaxis.label_position.x)+","+(o(0)+s.plot.xaxis.label_position.y)+")"),a.append("text").text(s.plot.yaxis.label).attr("class",e.axis_label).attr("transform","translate("+(r(0)+s.plot.yaxis.label_position.x)+","+(o(.5)+s.plot.yaxis.label_position.y)+")"),a.append("path").datum(p).attr("d",f).attr("class",e.curve1),a.selectAll(".dots").data(p).enter().append("circle").attr("r",s.plot.dotsize).attr("class",e.dots1).attr("transform",function(t){return"translate("+r(t.x)+","+o(t.y)+")"}),a.append("path").datum(u).attr("d",f).attr("class",e.curve2),a.selectAll(".dots").data(u).enter().append("circle").attr("r",s.plot.dotsize).attr("class",e.dots2).attr("transform",function(t){return"translate("+r(t.x)+","+o(t.y)+")"}),q},tt=({id:i})=>{const v=w.useRef(null),a=w.useRef(null),n=w.useRef(null);return w.useEffect(()=>K(a.current,n.current),[i]),m.jsx(m.Fragment,{children:m.jsxs("div",{ref:v,id:i,className:s.container.class,children:[m.jsx("svg",{ref:a,id:`${i}-display`,className:s.display.class,width:s.display.width,height:s.display.height,viewBox:`0 0 ${s.display.width} ${s.display.height}`}),m.jsx("svg",{ref:n,id:`${i}-controls`,className:s.controls.class,width:s.controls.width,height:s.controls.height,viewBox:`0 0 ${s.controls.width} ${s.controls.height}`})]})})};export{tt as default};
