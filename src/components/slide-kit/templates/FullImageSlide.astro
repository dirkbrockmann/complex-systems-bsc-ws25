---
import Figure from '../Figure.astro';
import type { ImageMetadata } from 'astro';

export interface Props {
  src: ImageMetadata;
  alt: string;
  caption?: string;
  fit?: 'contain' | 'cover';     // how the image fills the box
  bleed?: boolean;               // cancel slide padding to edge-to-edge
  class?: string;                // extra classes on the outer wrapper
  captionClass?: string;         // size/color tweaks for caption
}

const {
  src,
  alt,
  caption,
  fit = 'contain',
  bleed = false,
  class: className = '',
  captionClass = '',
  ...rest
} = Astro.props;
---
<!-- not-prose so Typography doesn't interfere -->
<div class={`not-prose h-full min-h-0 ${bleed ? '-m-8' : ''} ${className}`} {...rest}>
  <Figure
    src={src}
    alt={alt}
    boxed={true}
    class="m-0 h-full"
    mediaClass="w-full h-full bg-transparent"
    imgClass={`${fit === 'cover' ? 'object-cover' : 'object-contain'} w-full h-full`}
    captionClass={`mt-3 text-center ${captionClass}`}
  >
    {caption}
    <slot />
  </Figure>
</div>